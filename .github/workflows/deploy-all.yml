# Deploy both Web and API to Azure. Manual only (no deploy on push).
# Run via: Actions → Deploy All (Web + API) → Run workflow.
# Uses the same secrets/variables as deploy-web.yml and deploy-api.yml.

name: Deploy All (Web + API)

on:
  workflow_dispatch:

# Cancel previous deploy when a new one is triggered so we don't have 3+ runs queued for 30+ min
concurrency:
  group: deploy-all-${{ github.ref }}
  cancel-in-progress: true

jobs:
  deploy-web:
    uses: ./.github/workflows/deploy-web.yml
    secrets: inherit

  deploy-api:
    uses: ./.github/workflows/deploy-api.yml
    secrets: inherit
